MINIMUM AREA RECTANGLE II - VISUAL WALKTHROUGH
===============================================

PROBLEM UNDERSTANDING
=====================

Unlike "Minimum Area Rectangle I", sides DON'T need to be axis-aligned!

Example 1: Rotated Square
    Y
    2  â—                  Points: (1,2), (2,1), (1,0), (0,1)
    1    â—     â—          Forms a diamond/rotated square
    0  â—                  Area = 2.0
       0  1  2  X

If we require axis-aligned:
    Y
    2  â—â”€â”€â”€â”€â”€â”€â”€â—          Would need points like:
    1  â”‚       â”‚          (0,2), (2,2), (2,0), (0,0)
    0  â—â”€â”€â”€â”€â”€â”€â”€â—          Area = 4.0
       0  1  2  X

Example 2: Multiple Rectangles
    Y
    3  â—â”€â”€â”€â—â”€â”€â”€â—          Grid of points
    2  â—â”€â”€â”€â—â”€â”€â”€â—          Many possible rectangles
    1  â—â”€â”€â”€â—â”€â”€â”€â—          Find minimum area
    0  â—â”€â”€â”€â—â”€â”€â”€â—
       0  1  2  X


KEY GEOMETRIC INSIGHT
=====================

Rectangle Properties:
1. Four sides (opposite sides parallel and equal)
2. Four 90Â° angles
3. Two diagonals that:
   âœ“ Bisect each other (same midpoint)
   âœ“ Have equal length

Critical Insight:
If two line segments have:
  - Same center point AND
  - Equal length
Then their 4 endpoints form a rectangle!

Visual Proof:
    D â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â— C     Diagonal AC: center M, length d
      â”‚    M    â”‚       Diagonal BD: center M, length d
    A â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â— B     If M and d match â†’ rectangle!


DIAGONAL-BASED APPROACH
========================

Strategy:
1. Consider every pair of points as a potential diagonal
2. Compute diagonal's center and length
3. Group diagonals by center
4. Find pairs with matching lengths
5. Calculate area

Example: Points = [(1,2), (2,1), (1,0), (0,1)]

Step 1: All possible point pairs (as diagonals)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Pair 1: (1,2) - (2,1)
  Center: ((1+2)/2, (2+1)/2) = (1.5, 1.5)
  LengthÂ²: (2-1)Â² + (1-2)Â² = 1 + 1 = 2
  
Pair 2: (1,2) - (1,0)
  Center: ((1+1)/2, (2+0)/2) = (1, 1)
  LengthÂ²: (1-1)Â² + (2-0)Â² = 0 + 4 = 4
  
Pair 3: (1,2) - (0,1)
  Center: ((1+0)/2, (2+1)/2) = (0.5, 1.5)
  LengthÂ²: (1-0)Â² + (2-1)Â² = 1 + 1 = 2
  
Pair 4: (2,1) - (1,0)
  Center: ((2+1)/2, (1+0)/2) = (1.5, 0.5)
  LengthÂ²: (2-1)Â² + (1-0)Â² = 1 + 1 = 2
  
Pair 5: (2,1) - (0,1)
  Center: ((2+0)/2, (1+1)/2) = (1, 1)
  LengthÂ²: (2-0)Â² + (1-1)Â² = 4 + 0 = 4
  
Pair 6: (1,0) - (0,1)
  Center: ((1+0)/2, (0+1)/2) = (0.5, 0.5)
  LengthÂ²: (1-0)Â² + (0-1)Â² = 1 + 1 = 2

Step 2: Group by center
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Center (1.5, 1.5): [(1,2)-(2,1), lenÂ²=2]
Center (1, 1):     [(1,2)-(1,0), lenÂ²=4], [(2,1)-(0,1), lenÂ²=4]
Center (0.5, 1.5): [(1,2)-(0,1), lenÂ²=2]
Center (1.5, 0.5): [(2,1)-(1,0), lenÂ²=2]
Center (0.5, 0.5): [(1,0)-(0,1), lenÂ²=2]

Step 3: Find matching pairs at same center
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Center (1, 1): TWO diagonals with lengthÂ²=4!
  Diagonal 1: (1,2) - (1,0)
  Diagonal 2: (2,1) - (0,1)
  
These form a rectangle!

Step 4: Calculate area
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Points of rectangle: A=(1,2), B=(2,1), C=(1,0), D=(0,1)

Visual:
    2  A=(1,2)
    1        B=(2,1)
       D=(0,1)
    0  C=(1,0)
       0  1  2

Vector from A to B: (2-1, 1-2) = (1, -1)
Vector from A to D: (0-1, 1-2) = (-1, -1)

Cross product (area):
  |ABâƒ— Ã— ADâƒ—| = |1Ã—(-1) - (-1)Ã—(-1)|
              = |-1 - 1|
              = |-2|
              = 2.0

Answer: 2.0 âœ“


DETAILED WALKTHROUGH - GRID EXAMPLE
====================================

Points: [(0,0), (0,1), (1,0), (1,1), (0,2), (2,0), (2,2)]

Visual:
    2  â—â”€â”€â”€â”€â”€â”€â”€â—        7 points forming various rectangles
    1  â—â”€â”€â”€â—â”€â”€â”€Â·        
    0  â—â”€â”€â”€â—â”€â”€â”€â—
       0   1   2

All possible rectangles:
1. (0,0), (1,0), (1,1), (0,1) â†’ 1Ã—1 = 1.0
2. (0,0), (2,0), (2,2), (0,2) â†’ 2Ã—2 = 4.0
3. And more...

Let's trace the algorithm:

Step 1: Generate diagonals and group by center
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Center (0.5, 0.5):
  - Diagonal: (0,0)-(1,1), lengthÂ²=2
  
Center (1, 1):
  - Diagonal: (0,0)-(2,2), lengthÂ²=8
  - Diagonal: (0,2)-(2,0), lengthÂ²=8  â† Same center AND length!
  - Diagonal: (0,1)-(2,1), lengthÂ²=4
  
Center (0.5, 1):
  - Diagonal: (0,0)-(1,2), lengthÂ²=5
  - Diagonal: (0,2)-(1,0), lengthÂ²=5  â† Same center AND length!
  
... and many more

Step 2: Check pairs with same center and length
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Center (1, 1), lengthÂ²=8:
  Diagonals: (0,0)-(2,2) and (0,2)-(2,0)
  
  Visual:
      2  â—â”€â”€â”€â”€â”€â”€â”€â—
      1      Ã—       
      0  â—â”€â”€â”€â”€â”€â”€â”€â—
         0   1   2
  
  Points: (0,0), (2,2), (0,2), (2,0)
  
  Calculate area:
    Vector (0,0)â†’(2,2): (2,2)
    Vector (0,0)â†’(0,2): (0,2)
    Cross product: |2Ã—2 - 2Ã—0| = 4.0

Center (0.5, 0.5), lengthÂ²=2:
  Only one diagonal, skip.
  
Center (0.5, 1), lengthÂ²=5:
  Diagonals: (0,0)-(1,2) and (0,2)-(1,0)
  
  Visual:
      2  â—â”€â”€â”€â—
      1      â”‚
      0  â—â”€â”€â”€â—
         0   1
  
  Calculate area:
    Vector (0,0)â†’(1,2): (1,2)
    Vector (0,0)â†’(0,2): (0,2)
    Cross product: |1Ã—2 - 2Ã—0| = 2.0

Continue for all centers...

Minimum area found: 1.0 (from 1Ã—1 square)


AREA CALCULATION - CROSS PRODUCT
=================================

Why cross product works:

For rectangle ABCD:
    D â—â”€â”€â”€â”€â”€â— C
      â”‚     â”‚
    A â—â”€â”€â”€â”€â”€â— B

Vectors:
  ABâƒ— = B - A = (Bx - Ax, By - Ay)
  ADâƒ— = D - A = (Dx - Ax, Dy - Ay)

Cross product in 2D:
  ABâƒ— Ã— ADâƒ— = (ABâƒ—.x Ã— ADâƒ—.y) - (ABâƒ—.y Ã— ADâƒ—.x)

This gives SIGNED area of parallelogram formed by vectors.
For rectangle, this equals the actual area.
Take absolute value to ensure positive.

Example:
  A = (0, 0)
  B = (3, 0)
  D = (0, 2)
  
  ABâƒ— = (3, 0)
  ADâƒ— = (0, 2)
  
  Cross product = 3Ã—2 - 0Ã—0 = 6
  Area = 6 (which is 3Ã—2) âœ“


EDGE CASES
==========

Case 1: Fewer than 4 points
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Points: [(0,0), (1,1)]
Cannot form rectangle.
Return: 0.0

Case 2: Points on a line
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Points: [(0,0), (1,0), (2,0), (3,0)]
All collinear, no rectangle possible.
Return: 0.0

Case 3: Only axis-aligned rectangles
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Points: [(0,0), (0,1), (1,0), (1,1)]
Forms 1Ã—1 square.
Return: 1.0

Case 4: Square rotated 45Â°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Points: [(1,2), (2,1), (1,0), (0,1)]
Forms diamond with area 2.0
Return: 2.0

Case 5: Multiple rectangles of same area
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Points: [(0,0), (1,0), (0,1), (1,1), (2,0), (2,1)]
Two 1Ã—1 rectangles possible.
Return: 1.0 (same for both)


COMMON MISTAKES - VISUAL EXAMPLES
==================================

Mistake 1: Only checking axis-aligned
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    2  â—           This rotated square would be MISSED
    1    â—     â—   if only checking axis-aligned!
    0  â—
       0  1  2

âŒ WRONG: Check if points form axis-aligned rectangle
âœ“ CORRECT: Use diagonal approach (works for ANY orientation)


Mistake 2: Wrong area formula
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Given diagonals of length dâ‚ and dâ‚‚:

âŒ WRONG: Area = dâ‚ Ã— dâ‚‚
         This is area of square with diagonal d, not rectangle!
         
âœ“ CORRECT: Area = |cross product of two sides|
          OR: Area = sideâ‚ Ã— sideâ‚‚


Mistake 3: Floating point comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Centers: (1.5, 1.5) and (1.50000001, 1.5)

âŒ WRONG: if (center1 == center2)
         Fails due to floating point precision!
         
âœ“ CORRECT: Use integer arithmetic (2Ã—center) as key
          OR: Use epsilon comparison


Mistake 4: Not checking diagonal lengths
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â—    Same center but different lengths
      â•²     â•±      NOT a rectangle!
        \ /
        â•³
        / \
      â•±     â•²
    â—         â—

âŒ WRONG: Only check if centers match
âœ“ CORRECT: Check both center AND length match


COMPLEXITY ANALYSIS
===================

Time Complexity: O(nÂ²) average, O(nÂ³) worst case
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Step 1: Generate all diagonal pairs
  - Choose 2 from n points: C(n,2) = n(n-1)/2 = O(nÂ²)
  
Step 2: Group by center
  - Insert into HashMap: O(nÂ²) total
  
Step 3: Check pairs within each center group
  - For each center with k diagonals: O(kÂ²)
  - Sum over all centers: Î£ kÂ² â‰¤ nÂ² (best case: evenly distributed)
  - Worst case: all nÂ² diagonals have same center â†’ O(nâ´)
  - Average case: O(nÂ²)

Space Complexity: O(nÂ²)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- HashMap storing up to O(nÂ²) diagonal pairs
- Each diagonal: constant space
- Total: O(nÂ²)

Can we do better?
- For general position points: No, Î©(nÂ²) lower bound
- Must consider all possible diagonals
- No way to prune search space significantly


ALTERNATIVE APPROACH: CHECKING ALL 4-TUPLES
============================================

Brute Force: O(nâ´)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Try all combinations of 4 points: C(n,4) = O(nâ´)
For each combination, check if they form rectangle:
  - Compute 6 distances
  - Check pattern: 4 equal sides + 2 equal diagonals
  
This is much slower but conceptually simpler.

Comparison:
  n=10:  Diagonal approach: ~100 operations
         Brute force: ~10,000 operations
         
  n=100: Diagonal approach: ~10,000 operations
         Brute force: ~100,000,000 operations


OPTIMIZATION TIPS
=================

1. Integer Arithmetic for Centers
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Store center as (2Ã—cx, 2Ã—cy) using integers:
  center_x = p1.x + p2.x  (exact, no division)
  center_y = p1.y + p2.y
  
Benefits:
  âœ“ No floating point errors
  âœ“ Exact comparison
  âœ“ Faster HashMap lookups

2. Squared Distances
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Compare lengthÂ² instead of length:
  âœ“ Avoids expensive sqrt()
  âœ“ Still preserves ordering
  âœ“ More precise
  
Only compute sqrt when needed for final area.

3. Early Termination
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
If minimum area becomes very small (e.g., < 1.0),
can potentially terminate early.
(Though problem usually requires full search)


INTERVIEW TIPS
==============

Drawing is crucial!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Always draw example on whiteboard:
  1. Draw the points
  2. Draw possible rectangles
  3. Show how diagonals work
  4. Trace through algorithm

Start with simple case:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"Let me start with 4 points forming a rotated square..."
This shows you understand the non-axis-aligned aspect.

Explain geometric insight:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"Rectangle diagonals bisect each other and have equal length"
This shows mathematical understanding.

Mention complexity:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"Generating all diagonals is O(nÂ²), and checking pairs
is also O(nÂ²) on average, so total is O(nÂ²)."


SUMMARY
=======

Key Algorithm:
1. Generate all point pairs (diagonals): O(nÂ²)
2. Group by center point
3. Find pairs with matching lengths
4. Calculate area via cross product
5. Return minimum

Geometric Properties Used:
âœ“ Rectangle diagonals bisect each other
âœ“ Rectangle diagonals have equal length
âœ“ Area = |cross product of adjacent sides|

Complexity:
âœ“ Time: O(nÂ²) average case
âœ“ Space: O(nÂ²)

Critical Implementation Details:
âœ“ Use integer arithmetic for centers
âœ“ Use squared distances
âœ“ Handle floating point precision
âœ“ Return 0.0 if no rectangle found

This problem tests:
- Geometry
- Hash map usage
- Algorithm optimization
- Precision handling

Good luck! ğŸ“
